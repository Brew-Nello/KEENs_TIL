# 세션과 쿠키

## HTTP 쿠키
- 서버가 웹 브라우저에 전송하는 작은 데이터 조각
- 웹 브라우저가 이 조각을 저장했다가 동일한 서버에 다시 요청할 때 쿠키도 같이 전송해준다.
- 서버에서 어떤 요청이 브라우저에 들어왔는지를 판단할 때 사용하기도 한다.

### 쿠키 사용 목적
- 세션 관리
- 개인화
- 트래킹

### 쿠키 동작 방식
1. 클라이언트가 서버에 로그인 요청
2. 서버는 요청을 처리해 응답 헤더에 `set-cookie`를 추가해서 응답
3. 클라이언트는 그 다음부터 서버에 요청할 때, 쿠키를 `헤더`에 추가해서 요청
4. 서버는 쿠키를 보고 클라이언트에 응답

- 서버에서 클라이언트에 쿠키를 저장하라고 전달하면, 
- 클라이언트는 쿠키 `헤더`를 사용하여 서버로 이전에 저장했던 모든 쿠키들을 회신할 수 있다.

## 세션
- 인증을 여러 번 하지 않는 이유 중 하나가 `보안에 취약하다는 점`
- 클라인언트가 서버로 인증을 위해 쿠키를 요청을 여러번 하면 개인 정보를 보내야 하는데
 이 과정에서 탈취가 일어날 수도 있기 때문이다. 
```
-> 그래서 세션 사용
```

</br>

- 세션은 일정 시간 동안, 같은 사용자 상태를 이정하게 유지시키는 기술
- 웹 서버가 세션 아이디 파일을 만들어 서비스가 돌아가고 있는 서버에 저장하는 것
- 서버에 저장되기 떄문에 사용자 정보를 노출하지 않을 수 있다.

1. 클라이언트가 서버로 `HTTP` 요청을 한다
2, 서버는 접근한 클라이언트의 쿠키를 확인해서, 클라이언트가 해당 `SessionID`를 보내왔는지 확인한다
3. 만일 보내지 않았다면, 서버는 새롭게 SessionID를 생성, 클라이언트에 `set-cookie`값으로 `SessionID`를 보낸다.
4. 그 다음 요청부터, 전달 받은 `SessionID` 쿠키를 자동으로 헤더에 추가해서 요청한다.
5. 요청 헤더의 `SessionID`값을 저장된 세션 저장소에서 찾아보고 유효한지 확인 후 요청을 처리하고 응답해준다.

## 차이점
> 쿠키

|특징|내용|
|:---:|---|
|저장위치|로컬                  |
|보안   |탈취, 변조 가능         |
|생명주기|브라우저 종료해도 남음    |
|속도   |파일에서 읽기 때문에 빠르다|

</br>

> 세션

|특징|내용|
|:---:|---|
|저장위치|서버                              |
|보안   |서버에 저장되어 상대적으로 안전         |
|생명주기|브라우저 종료 시 세션 삭제             |
|속도   |요청마다 서버에서 처리 해야하기 때문에 느림|


